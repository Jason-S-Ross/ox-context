% Created 2021-01-09 Sat 15:09
%From CONTEXT_HEADER
\usemodule[pret-python]


% Turn on interaction to make links work
\setupinteraction[state=start]


% LaTeX-style descriptive enumerations
\definedescription[orgdesc]

% blockquote environment
\defineframedtext[orgblockquote]

% Create the example environment
\definetyping[orgexample]

% Create the fixed width environment
\definetyping[orgfixed]

% Create the inline source environment
\definetyping[orginlinesrc]

% Create the block source environment
\definetyping[orgblksrc]

% Create the table header style
\definextable[orgheader]

% Create the title page style
\definemakeup[titlepage]

% From CONTEXT_HEADER_EXTRA
\setuppapersize[letter]
\setuplayout[backspace=1.85in, width=4.8in, height=7.64in]
\setupxtable [align=center, leftframe=off, rightframe=off, topframe=off,
bottomframe=off, loffset=1em, roffset=1em, stretch=on]
\setupxtable[orgheader][toffset=1ex, foregroundstyle=bold, bottomframe=on]
\setuptyping[orgblksrc]
[before={\startframedtext[width=\makeupwidth,
background=color,
backgroundcolor=lightgray]},
after={\stopframedtext},
style={\small\tt},
numbering=line]
\setupheadertexts[{\getvariable{org}{author}}][{\getvariable{org}{title}}]
\setupfootertexts[][{Page \pagenumber}]
\setuppagenumbering[location=]
\setuplinenumbering[style={\small\tt}]
\setupframedtext
[orgblockquote]
[style={\sl}, frame=off, location=middle]
\setupcombinedlist[content]
\setvariable{org}{author}{Jason Ross}
\setvariable{org}{email}{jasonross1024@gmail.com}
\setvariable{org}{date}{(2021-01-07)}
\setvariable{org}{title}{Org Mode ConTeXt Export Demo}
\starttext
\startfrontmatter
\starttitlepagemakeup
 \startalignment[center]
  \blank[force,2*big]
  \title{\getvariable{org}{title}}
  \blank[3*medium]
  {\tfa \getvariable{org}{name}}
  \blank[3*medium]
  {\mono \getvariable{org}{email}}
  \blank[2*medium]
  {\tfa \getvariable{org}{date}}
  \blank[3*medium]
  \stopalignment\completecontent
\stoptitlepagemakeup
\stopfrontmatter
\startbodymatter

\section[reference={sec:orgd9c5c9d},
  title={Problem 1},
  list={Problem 1},
  marking={Problem 1}]
\orgdesc{Problem} Evaluate numerically the integral

\startformula

  I = \int_0^{\pi/2}{\ln\left(\sin{x}\right) dx}
  
\stopformula

and compare with the exact value \m{I = -\frac{\pi}{2}\ln{2}}

\orgdesc{Solution} \ldots{}

Note that \m{\ln{\left(\sin x\right)} = \ln{\left(x \frac{\sin x}{x}\right)}
    = \ln{x} + \ln{\frac{\sin x}{x}}}

Therefore we just need to find
\m{\int_0^{\pi/2}{\ln{x} dx}} analytically and evaluate
\m{\int_0^{\pi/2}{\ln{\frac{\sin x}{x}} dx}} numerically.

\m{\int_0^{\pi/2}{\ln{x} dx}} can be integrated by parts.

Let \m{u = \ln x, v^{'} = dx, u^{'} = \frac{1}{x}, v = x}. Therefore,
\startformula
\int{ln{x} dx} = \int{u v^{'} dx} = u v - \int{v u^{'} dx}
\stopformula
\startformula
 u v - \int{v u^{'} dx} = x \ln x - \int{x \frac{1}{x} dx} = x \ln x - x
\stopformula
And so, \m{\int_0^{\pi/2}{\ln x dx} = \left. x \ln x - x \right|_0^{\pi/2}}

\startformula
\startalign
\NC 
\frac{d^4}{dx^4} e^{a x} + e^{a x} \NC = 0 \NR
\NC a^4 e^{a x} + e^{a x} \NC = 0 \NR
\NC a^4 + 1 \NC = 0 \NR
\NC a^4 \NC = -1 \NR
\NC \stopalign
\stopformula

And, \m{\int_0^{\pi/2}{\ln x dx} = \frac{pi}{2} \left(\ln x - 1\right) \approx -0.861}

\startorgblksrc[option=python]
from sympy import log, pi, integrate
from sympy.abc import x
print((pi/2 * (log(pi/2) - 1)).evalf())
print(integrate(log(x), (x, 0, pi/2)).evalf())
\stoporgblksrc

\startorgblksrc[option=python]
-0.861451872082119
-0.861451872082119
\stoporgblksrc

So we have a value for part of our problem. The other part is to evaluate the integral
\startformula
\int_0^{\pi/2}{\ln{\frac{\sin x}{x}} dx}
\stopformula
We can do this with Simpson's rule. Recall that
\startformula
S = \frac{H}{9}\sum_{i=0}^{n-1}{f(x_0 + i H)+
    4 f\left(x_0 + \left(i + \frac{1}{2}\right) H\right) +
    f\left(x_0 + \left(i + 1\right) H\right)}
\stopformula

\startorgblksrc[option=python]
import matplotlib.pyplot as plt
import numpy as np
x, y = np.meshgrid(np.linspace(0, 1, 25), np.linspace(0, 1, 25))
def slope(x, y):
    return x - y**2
u = np.ones_like(x)
v = slope(x, y)
plt.figure(figsize=(8, 8))
plt.quiver(x, y, u, v, scale=30)
plt.gcf().tight_layout()
plt.plot(
    np.linspace(0, 1, 11),
    [0.000, 0.005, 0.020, 0.045, 0.080, 0.124,
     0.177, 0.238, 0.306, 0.380, 0.458]
)
plt.savefig("temp.pdf")
return "temp.pdf"

\stoporgblksrc

\startplacefigure[location={force,middle},title={Quiver Plot}]
\externalfigure[temp.pdf][]
\stopplacefigure

\subsection[reference={sec:org421b871},
  title={Sample Subheading},
  list={Sample Subheading},
  marking={Sample Subheading}]
\startitemize
\item Item

Some prose
\item Item 2

Some more prose
\stopitemize

Here's some prose in the middle

\startitemize[n]
\item Numbered item
\startitemize
\item A subitem
\startitemize
\item A subsubitem
\stopitemize
\stopitemize
\item Another numbered item
\stopitemize

\bold{Here's some bold} \italic{here's some italics} \inframed[frame=off]{\overstrike{Here's some strikethrough}}
\type{here's some code} \type{here's some verbatim} \underbar{here's some underline!?}
\underbar{\italic{Here's some underlined italics}}



Here's some junk in a drawer

\startorgblksrc[option=lua]
local function s(a)
  if control[s] then
    foo(s)
  end
end
\stoporgblksrc

\startorgblksrc[option=mp]
beginfig(1)
  draw fullcircle scaled 3cm ;
endfig ;
end ;
\stoporgblksrc


Here's a link to \about[sec:orgd9c5c9d]

Here's a link to \goto{google}[url(http://google.com)]

Here's a bare link to \goto{\hyphenatedurl{https://orgmode.org}}[url(https://orgmode.org)]

\pagebreak
\input{knuth}
\pagebreak


\subsubsection[reference={sec:orgf51ac22},
  title={\sansbold{DONE} Sample SubSubHeading\hfill{}{\tt sampletag} },
  list={Sample SubSubHeading},
  marking={Sample SubSubHeading}]
Here's a quote from Donald Knuth:
\startorgblockquote
The best programs are written so that computing machines can perform them
quickly and so that human beings can understand them clearly. A programmer
is ideally an essayist who works with traditional aesthetic and literary
forms as well as mathematical concepts, to communicate the way that an
algorithm works and to convince a reader that the results will be correct.

\stoporgblockquote

\blackrule[width=\textwidth, height=0.5pt]

\pagebreak
\subsubsubsection[reference={sec:org817c7ef},
  title={Sample SubSubSubHeading},
  list={Sample SubSubSubHeading},
  marking={Sample SubSubSubHeading}]
Here's a table

\startplacetable
\startxtable
\startxtablehead[orgheader]
\startxrow
\startxcell Head 1 \stopxcell
\startxcell Head 2 \stopxcell
\stopxrow
\stopxtablehead
\startxrow
\stopxrow
\startxrow
\startxcell Row 1 \stopxcell
\startxcell Row 2 \stopxcell
\stopxrow

\stopxtable
\stopplacetable

That was the table

\subsubsubsubsection[reference={sec:orgacacfd3},
  title={Sample SubSubSubSubHeading},
  list={Sample SubSubSubSubHeading},
  marking={Sample SubSubSubSubHeading}]
\subsubsubsubsubsection[reference={sec:org4b948b5},
  title={Sample SubSubSubSubSubHeading},
  list={Sample SubSubSubSubSubHeading},
  marking={Sample SubSubSubSubSubHeading}]
\stopbodymatter
\stoptext
